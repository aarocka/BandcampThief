// Generated by CoffeeScript 1.4.0
/*
 *
 *  jQuery Popovers by Gary Hepting - https://github.com/ghepting/jquery-popovers
 *  
 *  Open source under the BSD License. 
 *
 *  Copyright Â© 2013 Gary Hepting. All rights reserved.
 *
*/(function(){(function(e){return e.fn.popover=function(t){var n,r,i,s,o,u,a,f,l,c;r={hover:!1,click:!0,resize:!0,scroll:!0,topOffset:0,delay:500,speed:100};t=e.extend(r,t);u=e("#popover");s="";i="";c="";o=function(t){var n,r,i,s,o,u;i=t.offset();u=e(window);return{top:o=i.top-u.scrollTop(),left:r=i.left-u.scrollLeft(),bottom:n=u.height()-o-t.outerHeight(),right:s=u.width()-r-t.outerWidth()}};a=function(e){u.css({top:"auto",right:"auto",bottom:"auto",left:"auto"});e&&u.css({width:"auto"});u.removeClass("top");u.removeClass("right");u.removeClass("bottom");return u.removeClass("left")};f=function(n,r,i){var s,f,l,c;if(n){i?a(!0):a();f=o(n);u.outerWidth()>e(window).width()-20&&u.css("width",e(window).width()-20);u.css("max-width",Math.min(e(window).width()-parseInt(e("body").css("padding-left"))-parseInt(e("body").css("padding-right")),parseInt(u.css("max-width"))));c=u.outerWidth();l=u.outerHeight();s={};if(f.left<=f.right){u.addClass("left");s.left=f.left}else{u.addClass("right");s.right=f.right}if(f.top-t.topOffset>l+20){u.addClass("top");s.top=n.offset().top-l-20}else{u.addClass("bottom");s.top=n.offset().top+15}u.css(s);if(r)return u.css({top:"+=10"})}};n=function(){e(".popover-trigger").removeClass("popover-trigger");return u.removeClass("sticky").remove()};l=function(r){var i;c=e(r.target);if(!c.hasClass("popover-trigger")){n();c.addClass("popover-trigger")}i=e("#"+c.attr("data-content")).html();u=e('<div id="popover"></div>');if(!i||i==="")return!1;c.removeAttr("title");u.css("opacity",0).html(i).appendTo("body");f(c);u.animate({top:"+=10",opacity:1},t.speed);u.bind("click",function(e){if(e.target.tagName!=="a"){u.addClass("sticky");e.stopPropagation();e.preventDefault();return!1}});u.find(".close").bind("click",function(t){e(".popover-trigger").removeClass("popover-trigger");u.removeClass("sticky").remove();t.stopPropagation();t.preventDefault();return!1});return u.bind({mouseenter:function(){return clearTimeout(s)},mouseleave:function(){if(!u.hasClass("sticky"))return s=setTimeout(function(){e(".popover-trigger").removeClass("popover-trigger");return u.removeClass("sticky").remove()},500)}})};return this.each(function(){var r;r=e(this);t.hover&&r.bind({mouseenter:function(t){c=e(t.target);clearTimeout(s);if(!r.hasClass("popover-trigger")&&!u.hasClass("sticky"))return l(t)},mouseleave:function(){if(!u.hasClass("sticky"))return s=setTimeout(function(){return n()},t.delay)}});t.click&&r.bind("click",function(t){c=e(t.target);if(!c.hasClass("popover-trigger")){n();l(t)}u.addClass("sticky");t.preventDefault();t.stopPropagation();return!1});t.resize&&e(window).resize(function(){clearTimeout(i);return i=setTimeout(function(){return f(c,!0,!0)},100)});t.scroll&&e(window).scroll(function(){return f(c,!0)});return e("html, body").bind("click",function(t){e(".popover-trigger").removeClass("popover-trigger");return u.removeClass("sticky").remove()})})}})(jQuery)}).call(this);